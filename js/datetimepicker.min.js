/* Version modifiée et simplifiée de jQuery DateTimePicker plugin v2.5.4, de Chupurnov Valeriy http://xdsoft.net/jqplugins/datetimepicker/
 * supression des options du parser non utilisées, des langues autres que le français, de fonctionnalités inutiles
 * Cyril Ravat, https://cahier-de-prepa.fr 2016 *//*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014 - 2015
 * @version 1.3.3
 *
 * Date formatter utility library that allows formatting date/time variables or Date objects using PHP DateTime format.
 * @see http://php.net/manual/en/function.date.php
 *
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */var DateFormatter;(function(){"use strict";var e,t,n,r,i,s;i=864e5,s=3600,e=function(e,t){return typeof e=="string"&&typeof t=="string"&&e.toLowerCase()===t.toLowerCase()},t=function(e,n,r){var i=r||"0",s=e.toString();return s.length<n?t(i+s,n):s},n=function(e){var t,r;e=e||{};for(t=1;t<arguments.length;t++){r=arguments[t];if(!r)continue;for(var i in r)r.hasOwnProperty(i)&&(typeof r[i]=="object"?n(e[i],r[i]):e[i]=r[i])}return e},r={dateSettings:{},separators:/[ \-\/:h]/g,validParts:/[dmYGi]/g,intParts:/[dmYGi]/g},DateFormatter=function(e){var t=this,i=n(r,e);t.dateSettings=i.dateSettings,t.separators=i.separators,t.validParts=i.validParts,t.intParts=i.intParts},DateFormatter.prototype={constructor:DateFormatter,parseDate:function(e,t){var n=this,r,i,s,o=!1,u=!1,a,f,l=n.dateSettings,c,h,p,d,v,m={date:null,year:null,month:null,day:null,hour:0,min:0,sec:0};if(!e)return undefined;if(e instanceof Date)return e;if(typeof e=="number")return new Date(e);if(typeof e!="string")return"";r=t.match(n.validParts);if(!r||r.length===0)throw new Error("Invalid date format definition.");i=e.replace(n.separators,"\0").split("\0");for(s=0;s<i.length;s++){a=i[s],f=parseInt(a);switch(r[s]){case"Y":d=a.length,d===2?m.year=parseInt((f<70?"20":"19")+a):d===4&&(m.year=f),o=!0;break;case"m":isNaN(a)?(c=l.monthsShort.indexOf(a),c>-1&&(m.month=c+1),c=l.months.indexOf(a),c>-1&&(m.month=c+1)):f>=1&&f<=12&&(m.month=f),o=!0;break;case"d":f>=1&&f<=31&&(m.day=f),o=!0;break;case"G":f>=0&&f<=23&&(m.hour=f),u=!0;break;case"i":f>=0&&f<=59&&(m.min=f),u=!0}}if(o===!0&&m.year&&m.month&&m.day)m.date=new Date(m.year,m.month-1,m.day,m.hour,m.min,m.sec,0);else{if(u!==!0)return!1;m.date=new Date(0,0,0,m.hour,m.min,m.sec,0)}return m.date},parseFormat:function(e,n){var r=this,i=r.dateSettings,s,o=/\\?(.?)/gi,u=function(e,t){return s[e]?s[e]():t};return s={d:function(){return t(n.getDate(),2)},m:function(){return t(n.getMonth()+1,2)},Y:function(){return n.getFullYear()},G:function(){return n.getHours()},i:function(){return t(n.getMinutes(),2)}},u(e,e)},formatDate:function(e,t){var n=this,r,i,s,o,u,a="";if(typeof e=="string"){e=n.parseDate(e,t);if(e===!1)return!1}if(e instanceof Date){s=t.length;for(r=0;r<s;r++){u=t.charAt(r);if(u==="S")continue;o=n.parseFormat(u,e),r!==s-1&&n.intParts.test(u)&&t.charAt(r+1)==="S"&&(i=parseInt(o),o+=n.dateSettings.ordinal(i)),a+=o}return a}return""}}})(),function(e){typeof define=="function"&&define.amd?define(["jquery","jquery-mousewheel"],e):typeof exports=="object"?module.exports=e:e(jQuery)}(function(e){"use strict";function u(e,t,n){this.date=e,this.desc=t,this.style=n}var t=!1,n={i18n:{fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeekShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],dayOfWeek:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]}},value:"",format:"d/m/Y Ghi",formatTime:"Ghi",formatDate:"d/m/Y",startDate:!1,step:15,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnTimeSelect:!0,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,defaultTime:"8h00",defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,disabledMinTime:!1,disabledMaxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onGetWeekOfYear:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:1,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,prevButton:!0,nextButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:2015,yearEnd:2050,monthStart:0,monthEnd:11,style:"",id:"",fixed:!1,roundTime:"round",className:"",yearOffset:0,beforeShowDay:null,enterLikeTab:!0},r=null,i="fr",s="fr",o=function(){var t=n.i18n[s],i={days:t.dayOfWeek,daysShort:t.dayOfWeekShort,months:t.months,monthsShort:e.map(t.months,function(e){return e.substring(0,3)})};r=new DateFormatter({dateSettings:i})};e.datetimepicker={setDateFormatter:function(e){r=e}},o(),window.getComputedStyle||(window.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return t==="float"&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(e,t,n){return n.toUpperCase()})),e.currentStyle[t]||null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n,r;for(n=t||0,r=this.length;n<r;n+=1)if(this[n]===e)return n;return-1}),Date.prototype.countDaysInMonth=function(){return(new Date(this.getFullYear(),this.getMonth()+1,0)).getDate()},e.fn.xdsoftScroller=function(t){return this.each(function(){var n=e(this),r=function(e){var t={x:0,y:0},n;if(e.type==="touchstart"||e.type==="touchmove"||e.type==="touchend"||e.type==="touchcancel")n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],t.x=n.clientX,t.y=n.clientY;else if(e.type==="mousedown"||e.type==="mouseup"||e.type==="mousemove"||e.type==="mouseover"||e.type==="mouseout"||e.type==="mouseenter"||e.type==="mouseleave")t.x=e.clientX,t.y=e.clientY;return t},i,s,o,u,a,f=100,l=!1,c=0,h=0,p=0,d=!1,v=0,m=function(){};if(t==="hide"){n.find(".xdsoft_scrollbar").hide();return}e(this).hasClass("xdsoft_scroller_box")||(i=n.children().eq(0),s=n[0].clientHeight,o=i[0].offsetHeight,u=e('<div class="xdsoft_scrollbar"></div>'),a=e('<div class="xdsoft_scroller"></div>'),u.append(a),n.addClass("xdsoft_scroller_box").append(u),m=function(t){var i=r(t).y-c+v;i<0&&(i=0),i+a[0].offsetHeight>p&&(i=p-a[0].offsetHeight),n.trigger("scroll_element.xdsoft_scroller",[f?i/f:0])},a.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(i){s||n.trigger("resize_scroll.xdsoft_scroller",[t]),c=r(i).y,v=parseInt(a.css("margin-top"),10),p=u[0].offsetHeight,i.type==="mousedown"||i.type==="touchstart"?(document&&e(document.body).addClass("xdsoft_noselect"),e([document.body,window]).on("touchend mouseup.xdsoft_scroller",function o(){e([document.body,window]).off("touchend mouseup.xdsoft_scroller",o).off("mousemove.xdsoft_scroller",m).removeClass("xdsoft_noselect")}),e(document.body).on("mousemove.xdsoft_scroller",m)):(d=!0,i.stopPropagation(),i.preventDefault())}).on("touchmove",function(e){d&&(e.preventDefault(),m(e))}).on("touchend touchcancel",function(){d=!1,v=0}),n.on("scroll_element.xdsoft_scroller",function(e,t){s||n.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=t>1?1:t<0||isNaN(t)?0:t,a.css("margin-top",f*t),setTimeout(function(){i.css("marginTop",-parseInt((i[0].offsetHeight-s)*t,10))},10)}).on("resize_scroll.xdsoft_scroller",function(e,t,r){var l,c;s=n[0].clientHeight,o=i[0].offsetHeight,l=s/o,c=l*u[0].offsetHeight,l>1?a.hide():(a.show(),a.css("height",parseInt(c>10?c:10,10)),f=u[0].offsetHeight-a[0].offsetHeight,r!==!0&&n.trigger("scroll_element.xdsoft_scroller",[t||Math.abs(parseInt(i.css("marginTop"),10))/(o-s)]))}),n.on("mousewheel",function(e){var t=Math.abs(parseInt(i.css("marginTop"),10));return t-=e.deltaY*20,t<0&&(t=0),n.trigger("scroll_element.xdsoft_scroller",[t/(o-s)]),e.stopPropagation(),!1}),n.on("touchstart",function(e){l=r(e),h=Math.abs(parseInt(i.css("marginTop"),10))}),n.on("touchmove",function(e){if(l){e.preventDefault();var t=r(e);n.trigger("scroll_element.xdsoft_scroller",[(h-(t.y-l.y))/(o-s)])}}),n.on("touchend touchcancel",function(){l=!1,h=0})),n.trigger("resize_scroll.xdsoft_scroller",[t])})},e.fn.datetimepicker=function(i,o){var u=this,a=48,f=57,l=96,c=105,h=17,p=46,d=13,v=27,m=8,g=37,y=38,b=39,w=40,E=9,S=116,x=65,T=67,N=86,C=90,k=89,L=!1,A=e.isPlainObject(i)||!i?e.extend(!0,{},n,i):e.extend(!0,{},n),O,M,O=function(n){function K(){var e=!1,t;return A.startDate?e=X.strToDate(A.startDate):(e=A.value||(n&&n.val&&n.val()?n.val():""),e?e=X.strToDateTime(e):A.defaultDate&&(e=X.strToDateTime(A.defaultDate),A.defaultTime&&(t=X.strtotime(A.defaultTime),e.setHours(t.getHours()),e.setMinutes(t.getMinutes())))),e&&X.isValidDate(e)?o.data("changed",!0):e="",e||0}function Q(t){var r=function(e,t){var n=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return(new RegExp(n)).test(t)},i=function(e){try{if(document.selection&&document.selection.createRange){var t=document.selection.createRange();return t.getBookmark().charCodeAt(2)-2}if(e.setSelectionRange)return e.selectionStart}catch(n){return 0}},s=function(e,t){e=typeof e=="string"||e instanceof String?document.getElementById(e):e;if(!e)return!1;if(e.createTextRange){var n=e.createTextRange();return n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select(),!0}return e.setSelectionRange?(e.setSelectionRange(t,t),!0):!1};t.mask&&n.off("keydown.xdsoft"),t.mask===!0&&(typeof moment!="undefined"?t.mask=t.format.replace(/Y{4}/g,"9999").replace(/Y{2}/g,"99").replace(/M{2}/g,"19").replace(/D{2}/g,"39").replace(/H{2}/g,"29").replace(/m{2}/g,"59").replace(/s{2}/g,"59"):t.mask=t.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),e.type(t.mask)==="string"&&(r(t.mask,n.val())||(n.val(t.mask.replace(/[0-9]/g,"_")),s(n[0],0)),n.on("keydown.xdsoft",function(o){var u=this.value,A=o.which,O,M;if(A>=a&&A<=f||A>=l&&A<=c||A===m||A===p){O=i(this),M=A!==m&&A!==p?String.fromCharCode(l<=A&&A<=c?A-a:A):"_",(A===m||A===p)&&O&&(O-=1,M="_");while(/[^0-9_]/.test(t.mask.substr(O,1))&&O<t.mask.length&&O>0)O+=A===m||A===p?-1:1;u=u.substr(0,O)+M+u.substr(O+1);if(e.trim(u)==="")u=t.mask.replace(/[0-9]/g,"_");else if(O===t.mask.length)return o.preventDefault(),!1;O+=A===m||A===p?0:1;while(/[^0-9_]/.test(t.mask.substr(O,1))&&O<t.mask.length&&O>0)O+=A===m||A===p?-1:1;r(t.mask,u)?(this.value=u,s(this,O)):e.trim(u)===""?this.value=t.mask.replace(/[0-9]/g,"_"):n.trigger("error_input.xdsoft")}else if([x,T,N,C,k].indexOf(A)!==-1&&L||[v,y,w,g,b,S,h,E,d].indexOf(A)!==-1)return!0;return o.preventDefault(),!1}))}var o=e('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),u=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),O=e('<div class="xdsoft_datepicker active"></div>'),M=e('<div class="xdsoft_monthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),_=e('<div class="xdsoft_calendar"></div>'),D=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),P=D.find(".xdsoft_time_box").eq(0),H=e('<div class="xdsoft_time_variant"></div>'),B=e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),j=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),F=!1,I,q,R,U,z,W=0,X,V,J;A.id&&o.attr("id",A.id),A.style&&o.attr("style",A.style),o.addClass("xdsoft_"+A.theme),o.addClass(A.className),M.find(".xdsoft_month span").after(B),M.find(".xdsoft_year span").after(j),M.find(".xdsoft_month,.xdsoft_year").on("touchstart mousedown.xdsoft",function(t){var n=e(this).find(".xdsoft_select").eq(0),r=0,i=0,s=n.is(":visible"),o,u;M.find(".xdsoft_select").hide(),X.currentTime&&(r=X.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),n[s?"hide":"show"]();for(o=n.find("div.xdsoft_option"),u=0;u<o.length;u+=1){if(o.eq(u).data("value")===r)break;i+=o[0].offsetHeight}return n.xdsoftScroller(i/(n.children()[0].offsetHeight-n[0].clientHeight)),t.stopPropagation(),!1}),M.find(".xdsoft_select").xdsoftScroller().on("touchstart mousedown.xdsoft",function(e){e.stopPropagation(),e.preventDefault()}).on("touchstart mousedown.xdsoft",".xdsoft_option",function(){if(X.currentTime===undefined||X.currentTime===null)X.currentTime=X.now();var t=X.currentTime.getFullYear();X&&X.currentTime&&X.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value")),e(this).parent().parent().hide(),o.trigger("xchange.xdsoft"),A.onChangeMonth&&e.isFunction(A.onChangeMonth)&&A.onChangeMonth.call(o,X.currentTime,o.data("input")),t!==X.currentTime.getFullYear()&&e.isFunction(A.onChangeYear)&&A.onChangeYear.call(o,X.currentTime,o.data("input"))}),o.getValue=function(){return X.getCurrentTime()},o.setOptions=function(t){var i={};A=e.extend(!0,{},A,t),A.datepicker?O.addClass("active"):O.removeClass("active"),A.timepicker?D.addClass("active"):D.removeClass("active"),A.value&&(X.setCurrentTime(A.value),n&&n.val&&n.val(X.str)),isNaN(A.dayOfWeekStart)?A.dayOfWeekStart=0:A.dayOfWeekStart=parseInt(A.dayOfWeekStart,10)%7,A.timepickerScrollbar||P.xdsoftScroller("hide"),A.minDate&&/^[\+\-](.*)$/.test(A.minDate)&&(A.minDate=r.formatDate(X.strToDateTime(A.minDate),A.formatDate)),A.maxDate&&/^[\+\-](.*)$/.test(A.maxDate)&&(A.maxDate=r.formatDate(X.strToDateTime(A.maxDate),A.formatDate)),M.find(".xdsoft_today_button").css("visibility",A.todayButton?"visible":"hidden"),M.find("."+A.prev).css("visibility",A.prevButton?"visible":"hidden"),M.find("."+A.next).css("visibility",A.nextButton?"visible":"hidden"),Q(A),A.validateOnBlur&&n.off("blur.xdsoft").on("blur.xdsoft",function(){if(A.allowBlank&&(!e.trim(e(this).val()).length||typeof A.mask=="string"&&e.trim(e(this).val())===A.mask.replace(/[0-9]/g,"_")))e(this).val(null),o.data("xdsoft_datetime").empty();else{var t=r.parseDate(e(this).val(),A.format);if(t)e(this).val(r.formatDate(t,A.format));else{var n=+[e(this).val()[0],e(this).val()[1]].join(""),i=+[e(this).val()[2],e(this).val()[3]].join("");!A.datepicker&&A.timepicker&&n>=0&&n<24&&i>=0&&i<60?e(this).val([n,i].map(function(e){return e>9?e:"0"+e}).join(":")):e(this).val(r.formatDate(X.now(),A.format))}o.data("xdsoft_datetime").setCurrentTime(e(this).val())}o.trigger("changedatetime.xdsoft"),o.trigger("close.xdsoft")}),o.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},o.data("options",A).on("touchstart mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),j.hide(),B.hide(),!1}),P.append(H),P.xdsoftScroller(),o.on("afterOpen.xdsoft",function(){P.xdsoftScroller()}),o.append(O).append(D),A.withoutCopyright!==!0&&o.append(u),O.append(M).append(_),e(A.parentID).append(o),I=function(){var t=this;t.now=function(e){var n=new Date,r,i;return!e&&A.defaultDate&&(r=t.strToDateTime(A.defaultDate),n.setFullYear(r.getFullYear()),n.setMonth(r.getMonth()),n.setDate(r.getDate())),A.yearOffset&&n.setFullYear(n.getFullYear()+A.yearOffset),!e&&A.defaultTime&&(i=t.strtotime(A.defaultTime),n.setHours(i.getHours()),n.setMinutes(i.getMinutes())),n},t.isValidDate=function(e){return Object.prototype.toString.call(e)!=="[object Date]"?!1:!isNaN(e.getTime())},t.setCurrentTime=function(e,n){typeof e=="string"?t.currentTime=t.strToDateTime(e):t.isValidDate(e)?t.currentTime=e:!e&&!n&&A.allowBlank?t.currentTime=null:t.currentTime=t.now(),o.trigger("xchange.xdsoft")},t.empty=function(){t.currentTime=null},t.getCurrentTime=function(e){return t.currentTime},t.nextMonth=function(){if(t.currentTime===undefined||t.currentTime===null)t.currentTime=t.now();var n=t.currentTime.getMonth()+1,r;return n===12&&(t.currentTime.setFullYear(t.currentTime.getFullYear()+1),n=0),r=t.currentTime.getFullYear(),t.currentTime.setDate(Math.min((new Date(t.currentTime.getFullYear(),n+1,0)).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(n),A.onChangeMonth&&e.isFunction(A.onChangeMonth)&&A.onChangeMonth.call(o,X.currentTime,o.data("input")),r!==t.currentTime.getFullYear()&&e.isFunction(A.onChangeYear)&&A.onChangeYear.call(o,X.currentTime,o.data("input")),o.trigger("xchange.xdsoft"),n},t.prevMonth=function(){if(t.currentTime===undefined||t.currentTime===null)t.currentTime=t.now();var n=t.currentTime.getMonth()-1;return n===-1&&(t.currentTime.setFullYear(t.currentTime.getFullYear()-1),n=11),t.currentTime.setDate(Math.min((new Date(t.currentTime.getFullYear(),n+1,0)).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(n),A.onChangeMonth&&e.isFunction(A.onChangeMonth)&&A.onChangeMonth.call(o,X.currentTime,o.data("input")),o.trigger("xchange.xdsoft"),n},t.getWeekOfYear=function(t){if(A.onGetWeekOfYear&&e.isFunction(A.onGetWeekOfYear)){var n=A.onGetWeekOfYear.call(o,t);if(typeof n!="undefined")return n}var r=new Date(t.getFullYear(),0,1);return r.getDay()!=4&&r.setMonth(0,1+(4-r.getDay()+7)%7),Math.ceil(((t-r)/864e5+r.getDay()+1)/7)},t.strToDateTime=function(e){var n=[],i,s;return e&&e instanceof Date&&t.isValidDate(e)?e:(n=/^(\+|\-)(.*)$/.exec(e),n&&(n[2]=r.parseDate(n[2],A.formatDate)),n&&n[2]?(i=n[2].getTime()-n[2].getTimezoneOffset()*6e4,s=new Date(t.now(!0).getTime()+parseInt(n[1]+"1",10)*i)):s=e?r.parseDate(e,A.format):t.now(),t.isValidDate(s)||(s=t.now()),s)},t.strToDate=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var n=e?r.parseDate(e,A.formatDate):t.now(!0);return t.isValidDate(n)||(n=t.now(!0)),n},t.strtotime=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var n=e?r.parseDate(e,A.formatTime):t.now(!0);return t.isValidDate(n)||(n=t.now(!0)),n},t.str=function(){return r.formatDate(t.currentTime,A.format)},t.currentTime=this.now()},X=new I,M.find(".xdsoft_today_button").on("touchend mousedown.xdsoft",function(){o.data("changed",!0),X.setCurrentTime(0,!0),o.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){var e=X.getCurrentTime(),t,r;e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=X.strToDate(A.minDate),t=new Date(t.getFullYear(),t.getMonth(),t.getDate());if(e<t)return;r=X.strToDate(A.maxDate),r=new Date(r.getFullYear(),r.getMonth(),r.getDate());if(e>r)return;n.val(X.str()),n.trigger("change"),o.trigger("close.xdsoft")}),M.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var t=e(this),n=0,r=!1;(function i(e){t.hasClass(A.next)?X.nextMonth():t.hasClass(A.prev)&&X.prevMonth(),A.monthChangeSpinner&&(r||(n=setTimeout(i,e||100)))})(500),e([document.body,window]).on("touchend mouseup.xdsoft",function s(){clearTimeout(n),r=!0,e([document.body,window]).off("touchend mouseup.xdsoft",s)})}),D.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var t=e(this),n=0,r=!1,i=110;(function s(e){var o=P[0].clientHeight,u=H[0].offsetHeight,a=Math.abs(parseInt(H.css("marginTop"),10));t.hasClass(A.next)&&u-o-A.timeHeightInTimePicker>=a?H.css("marginTop","-"+(a+A.timeHeightInTimePicker)+"px"):t.hasClass(A.prev)&&a-A.timeHeightInTimePicker>=0&&H.css("marginTop","-"+(a-A.timeHeightInTimePicker)+"px"),P.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(H[0].style.marginTop,10)/(u-o))]),i=i>10?10:i-10,r||(n=setTimeout(s,e||i))})(500),e([document.body,window]).on("touchend mouseup.xdsoft",function o(){clearTimeout(n),r=!0,e([document.body,window]).off("touchend mouseup.xdsoft",o)})}),q=0,o.on("xchange.xdsoft",function(t){clearTimeout(q),q=setTimeout(function(){if(X.currentTime===undefined||X.currentTime===null){if(A.allowBlank)return;X.currentTime=X.now()}var t="",u=new Date(X.currentTime.getFullYear(),X.currentTime.getMonth(),1,12,0,0),a=0,f,l=X.now(),c=!1,h=!1,p,d,v,m,g,y,b=[],w,E=!0,S="",x="",T,N;while(u.getDay()!==A.dayOfWeekStart)u.setDate(u.getDate()-1);t+="<table><thead><tr>";for(f=0;f<7;f+=1)t+="<th>"+A.i18n[s].dayOfWeekShort[(f+A.dayOfWeekStart)%7]+"</th>";t+="</tr></thead>",t+="<tbody>",A.maxDate!==!1&&(c=X.strToDate(A.maxDate),c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999)),A.minDate!==!1&&(h=X.strToDate(A.minDate),h=new Date(h.getFullYear(),h.getMonth(),h.getDate()));while(a<X.currentTime.countDaysInMonth()||u.getDay()!==A.dayOfWeekStart||X.currentTime.getMonth()===u.getMonth())b=[],a+=1,d=u.getDay(),v=u.getDate(),m=u.getFullYear(),g=u.getMonth(),y=X.getWeekOfYear(u),N="",b.push("xdsoft_date"),A.beforeShowDay&&e.isFunction(A.beforeShowDay.call)?w=A.beforeShowDay.call(o,u):w=null,(c!==!1&&u>c||h!==!1&&u<h||w&&w[0]===!1)&&b.push("xdsoft_disabled"),w&&w[1]!==""&&b.push(w[1]),X.currentTime.getMonth()!==g&&b.push("xdsoft_other_month"),(A.defaultSelect||o.data("changed"))&&r.formatDate(X.currentTime,A.formatDate)===r.formatDate(u,A.formatDate)&&b.push("xdsoft_current"),r.formatDate(l,A.formatDate)===r.formatDate(u,A.formatDate)&&b.push("xdsoft_today"),A.beforeShowDay&&e.isFunction(A.beforeShowDay)&&b.push(A.beforeShowDay(u)),E&&(t+="<tr>",E=!1),t+='<td data-date="'+v+'" data-month="'+g+'" data-year="'+m+'"'+' class="xdsoft_date xdsoft_day_of_week'+u.getDay()+" "+b.join(" ")+'" title="'+N+'">'+"<div>"+v+"</div>"+"</td>",u.getDay()===A.dayOfWeekStart-1&&(t+="</tr>",E=!0),u.setDate(v+1);t+="</tbody></table>",_.html(t),M.find(".xdsoft_label span").eq(0).text(A.i18n[s].months[X.currentTime.getMonth()]),M.find(".xdsoft_label span").eq(1).text(X.currentTime.getFullYear()),S="",x="",g="",T=function(i,s){var u=X.now(),a,f,c=A.allowTimes&&e.isArray(A.allowTimes)&&A.allowTimes.length;u.setHours(i),i=parseInt(u.getHours(),10),u.setMinutes(s),s=parseInt(u.getMinutes(),10),a=new Date(X.currentTime),a.setHours(i),a.setMinutes(s),b=[],A.minDateTime!==!1&&A.minDateTime>a||A.maxTime!==!1&&X.strtotime(A.maxTime).getTime()<u.getTime()||A.minTime!==!1&&X.strtotime(A.minTime).getTime()>u.getTime()?b.push("xdsoft_disabled"):A.minDateTime!==!1&&A.minDateTime>a||A.disabledMinTime!==!1&&u.getTime()>X.strtotime(A.disabledMinTime).getTime()&&A.disabledMaxTime!==!1&&u.getTime()<X.strtotime(A.disabledMaxTime).getTime()?b.push("xdsoft_disabled"):n.is("[readonly]")&&b.push("xdsoft_disabled"),f=new Date(X.currentTime),f.setHours(parseInt(X.currentTime.getHours(),10)),c||f.setMinutes(Math[A.roundTime](X.currentTime.getMinutes()/A.step)*A.step),(A.initTime||A.defaultSelect||o.data("changed"))&&f.getHours()===parseInt(i,10)&&(!c&&A.step>59||f.getMinutes()===parseInt(s,10))&&(A.defaultSelect||o.data("changed")?b.push("xdsoft_current"):A.initTime&&b.push("xdsoft_init_time")),parseInt(l.getHours(),10)===parseInt(i,10)&&parseInt(l.getMinutes(),10)===parseInt(s,10)&&b.push("xdsoft_today"),S+='<div class="xdsoft_time '+b.join(" ")+'" data-hour="'+i+'" data-minute="'+s+'">'+r.formatDate(u,A.formatTime)+"</div>"};if(!A.allowTimes||!e.isArray(A.allowTimes)||!A.allowTimes.length)for(a=0,f=0;a<(A.hours12?12:24);a+=1)for(f=0;f<60;f+=A.step)x=(a<10?"0":"")+a,g=(f<10?"0":"")+f,T(x,g);else for(a=0;a<A.allowTimes.length;a+=1)x=X.strtotime(A.allowTimes[a]).getHours(),g=X.strtotime(A.allowTimes[a]).getMinutes(),T(x,g);H.html(S),i="",a=0;for(a=parseInt(A.yearStart,10)+A.yearOffset;a<=parseInt(A.yearEnd,10)+A.yearOffset;a+=1)i+='<div class="xdsoft_option '+(X.currentTime.getFullYear()===a?"xdsoft_current":"")+'" data-value="'+a+'">'+a+"</div>";j.children().eq(0).html(i);for(a=parseInt(A.monthStart,10),i="";a<=parseInt(A.monthEnd,10);a+=1)i+='<div class="xdsoft_option '+(X.currentTime.getMonth()===a?"xdsoft_current":"")+'" data-value="'+a+'">'+A.i18n[s].months[a]+"</div>";B.children().eq(0).html(i),e(o).trigger("generate.xdsoft")},10),t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(A.timepicker){var e,t,n,r;H.find(".xdsoft_current").length?e=".xdsoft_current":H.find(".xdsoft_init_time").length&&(e=".xdsoft_init_time"),e?(t=P[0].clientHeight,n=H[0].offsetHeight,r=H.find(e).index()*A.timeHeightInTimePicker+1,n-t<r&&(r=n-t),P.trigger("scroll_element.xdsoft_scroller",[parseInt(r,10)/(n-t)])):P.trigger("scroll_element.xdsoft_scroller",[0])}}),R=0,_.on("touchend click.xdsoft","td",function(t){t.stopPropagation(),R+=1;var r=e(this),i=X.currentTime;if(i===undefined||i===null)X.currentTime=X.now(),i=X.currentTime;if(r.hasClass("xdsoft_disabled"))return!1;i.setDate(1),i.setFullYear(r.data("year")),i.setMonth(r.data("month")),i.setDate(r.data("date")),o.trigger("select.xdsoft",[i]),n.val(X.str()),A.onSelectDate&&e.isFunction(A.onSelectDate)&&A.onSelectDate.call(o,X.currentTime,o.data("input"),t),o.data("changed",!0),o.trigger("xchange.xdsoft"),o.trigger("changedatetime.xdsoft"),(R>1||A.closeOnDateSelect===!0||A.closeOnDateSelect===!1&&!A.timepicker)&&!A.inline&&o.trigger("close.xdsoft"),setTimeout(function(){R=0},200)}),H.on("touchmove","div",function(){t=!0}).on("touchend click.xdsoft","div",function(n){n.stopPropagation();if(t){t=!1;return}var r=e(this),i=X.currentTime;if(i===undefined||i===null)X.currentTime=X.now(),i=X.currentTime;if(r.hasClass("xdsoft_disabled"))return!1;i.setHours(r.data("hour")),i.setMinutes(r.data("minute")),o.trigger("select.xdsoft",[i]),o.data("input").val(X.str()),A.onSelectTime&&e.isFunction(A.onSelectTime)&&A.onSelectTime.call(o,X.currentTime,o.data("input"),n),o.data("changed",!0),o.trigger("xchange.xdsoft"),o.trigger("changedatetime.xdsoft"),A.inline!==!0&&A.closeOnTimeSelect===!0&&o.trigger("close.xdsoft")}),O.on("mousewheel.xdsoft",function(e){return A.scrollMonth?(e.deltaY<0?X.nextMonth():X.prevMonth(),!1):!0}),n.on("mousewheel.xdsoft",function(e){if(!A.scrollInput)return!0;if(!A.datepicker&&A.timepicker)return U=H.find(".xdsoft_current").length?H.find(".xdsoft_current").eq(0).index():0,U+e.deltaY>=0&&U+e.deltaY<H.children().length&&(U+=e.deltaY),H.children().eq(U).length&&H.children().eq(U).trigger("mousedown"),!1;if(A.datepicker&&!A.timepicker)return O.trigger(e,[e.deltaY,e.deltaX,e.deltaY]),n.val&&n.val(X.str()),o.trigger("changedatetime.xdsoft"),!1}),o.on("changedatetime.xdsoft",function(t){if(A.onChangeDateTime&&e.isFunction(A.onChangeDateTime)){var n=o.data("input");A.onChangeDateTime.call(o,X.currentTime,n,t),delete A.value,n.trigger("change")}}).on("generate.xdsoft",function(){A.onGenerate&&e.isFunction(A.onGenerate)&&A.onGenerate.call(o,X.currentTime,o.data("input")),F&&(o.trigger("afterOpen.xdsoft"),F=!1)}).on("click.xdsoft",function(e){e.stopPropagation()}),U=0,V=function(e,t){do{e=e.parentNode;if(t(e)===!1)break}while(e.nodeName!=="HTML")},z=function(){var t,n,r,i,s,u,a,f,l,c,h,p,d;f=o.data("input"),t=f.offset(),n=f[0],c="top",r=t.top+n.offsetHeight-1,i=t.left,s="absolute",l=e(window).width(),p=e(window).height(),d=e(window).scrollTop();if(document.documentElement.clientWidth-t.left<O.parent().outerWidth(!0)){var v=O.parent().outerWidth(!0)-n.offsetWidth;i-=v}A.fixed?(r-=d,i-=e(window).scrollLeft(),s="fixed"):(a=!1,V(n,function(e){if(window.getComputedStyle(e).getPropertyValue("position")==="fixed")return a=!0,!1}),a?(s="fixed",r+o.outerHeight()>p+d?(c="bottom",r=p+d-t.top):r-=d):r+n.offsetHeight>p+d&&(r=t.top-n.offsetHeight+1),r<0&&(r=0),i+n.offsetWidth>l&&(i=l-n.offsetWidth)),u=o[0],V(u,function(e){var t;t=window.getComputedStyle(e).getPropertyValue("position");if(t==="relative"&&l>=e.offsetWidth)return i-=(l-e.offsetWidth)/2,!1}),h={position:s,left:i,top:"",bottom:""},h[c]=r,o.css(h)},o.on("open.xdsoft",function(t){var n=!0;A.onShow&&e.isFunction(A.onShow)&&(n=A.onShow.call(o,X.currentTime,o.data("input"),t)),n!==!1&&(o.show(),z(),e(window).off("resize.xdsoft",z).on("resize.xdsoft",z),A.closeOnWithoutClick&&e([document.body,window]).on("touchstart mousedown.xdsoft",function r(){o.trigger("close.xdsoft"),e([document.body,window]).off("touchstart mousedown.xdsoft",r)}))}).on("close.xdsoft",function(t){var n=!0;M.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),A.onClose&&e.isFunction(A.onClose)&&(n=A.onClose.call(o,X.currentTime,o.data("input"),t)),n!==!1&&!A.opened&&!A.inline&&o.hide(),t.stopPropagation()}).on("toggle.xdsoft",function(){o.is(":visible")?o.trigger("close.xdsoft"):o.trigger("open.xdsoft")}).data("input",n),W=0,o.data("xdsoft_datetime",X),o.setOptions(A),X.setCurrentTime(K()),n.data("xdsoft_datetimepicker",o).on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function(){if(n.is(":disabled")||n.data("xdsoft_datetimepicker").is(":visible")&&A.closeOnInputClick)return;clearTimeout(W),W=setTimeout(function(){if(n.is(":disabled"))return;F=!0,X.setCurrentTime(K(),!0),A.mask&&Q(A),o.trigger("open.xdsoft")},100)}).on("keydown.xdsoft",function(t){var n,r=t.which;if([d].indexOf(r)!==-1&&A.enterLikeTab)return o.trigger("close.xdsoft"),!0;if([E].indexOf(r)!==-1)return o.trigger("close.xdsoft"),!0}).on("blur.xdsoft",function(){o.trigger("close.xdsoft")})};return M=function(t){var n=t.data("xdsoft_datetimepicker");n&&(n.data("xdsoft_datetime",null),n.remove(),t.data("xdsoft_datetimepicker",null).off(".xdsoft"),e(window).off("resize.xdsoft"),e([window,document.body]).off("mousedown.xdsoft touchstart"),t.unmousewheel&&t.unmousewheel())},e(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){e.keyCode===h&&(L=!0)}).on("keyup.xdsoftctrl",function(e){e.keyCode===h&&(L=!1)}),this.each(function(){var t=e(this).data("xdsoft_datetimepicker"),n;if(t){if(e.type(i)==="string")switch(i){case"show":e(this).select().focus(),t.trigger("open.xdsoft");break;case"hide":t.trigger("close.xdsoft");break;case"toggle":t.trigger("toggle.xdsoft");break;case"destroy":M(e(this));break;case"reset":this.value=this.defaultValue,(!this.value||!t.data("xdsoft_datetime").isValidDate(r.parseDate(this.value,A.format)))&&t.data("changed",!1),t.data("xdsoft_datetime").setCurrentTime(this.value);break;case"validate":n=t.data("input"),n.trigger("blur.xdsoft");break;default:t[i]&&e.isFunction(t[i])&&(u=t[i](o))}else t.setOptions(i);return 0}e.type(i)!=="string"&&O(e(this))}),u},e.fn.datetimepicker.defaults=n}),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?module.exports=e:e(jQuery)}(function(e){function a(t){var n=t||window.event,o=r.call(arguments,1),a=0,c=0,h=0,p=0,d=0,v=0;t=e.event.fix(n),t.type="mousewheel","detail"in n&&(h=n.detail*-1),"wheelDelta"in n&&(h=n.wheelDelta),"wheelDeltaY"in n&&(h=n.wheelDeltaY),"wheelDeltaX"in n&&(c=n.wheelDeltaX*-1),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(c=h*-1,h=0),a=h===0?c:h,"deltaY"in n&&(h=n.deltaY*-1,a=h),"deltaX"in n&&(c=n.deltaX,h===0&&(a=c*-1));if(h===0&&c===0)return;if(n.deltaMode===1){var m=e.data(this,"mousewheel-line-height");a*=m,h*=m,c*=m}else if(n.deltaMode===2){var g=e.data(this,"mousewheel-page-height");a*=g,h*=g,c*=g}p=Math.max(Math.abs(h),Math.abs(c));if(!s||p<s)s=p,l(n,p)&&(s/=40);l(n,p)&&(a/=40,c/=40,h/=40),a=Math[a>=1?"floor":"ceil"](a/s),c=Math[c>=1?"floor":"ceil"](c/s),h=Math[h>=1?"floor":"ceil"](h/s);if(u.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();d=t.clientX-y.left,v=t.clientY-y.top}return t.deltaX=c,t.deltaY=h,t.deltaFactor=s,t.offsetX=d,t.offsetY=v,t.deltaMode=0,o.unshift(t,a,c,h),i&&clearTimeout(i),i=setTimeout(f,200),(e.event.dispatch||e.event.handle).apply(this,o)}function f(){s=null}function l(e,t){return u.settings.adjustOldDeltas&&e.type==="mousewheel"&&t%120===0}var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice,i,s;if(e.event.fixHooks)for(var o=t.length;o;)e.event.fixHooks[t[--o]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],a,!1);else this.onmousewheel=a;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=n.length;t;)this.removeEventListener(n[--t],a,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),r=n["offsetParent"in e.fn?"offsetParent":"parent"]();return r.length||(r=e("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset
:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});
